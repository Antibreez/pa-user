"use strict";!function(){var e=document.querySelectorAll(".input-file__label");function t(e){var t=e.querySelector("input"),n=e.parentNode.querySelector(".file-load__clear");function i(e){e.preventDefault(),e.stopPropagation()}function o(t){e.classList.add("highlight")}function s(t){e.classList.remove("highlight")}["dragenter","dragover","dragleave","drop"].forEach((function(t){e.addEventListener(t,i,!1)})),["dragenter","dragover"].forEach((function(t){e.addEventListener(t,o,!1)})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,s,!1)})),e.addEventListener("drop",(function(e){var n=e.dataTransfer.files;t.files&&t.files[0]&&(t.value="",/safari/i.test(navigator.userAgent)||(t.type="",t.type="file"));t.files=n,l()}),!1);var l=function(){a(t)},a=function(t){if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.parentNode.classList.add("loaded"),e.nextElementSibling.querySelector(".file-load__name").textContent=t.files[0].name,window.onInstallationFileDrop&&window.onInstallationFileDrop()},n.readAsDataURL(t.files[0])}};t.addEventListener("change",l),n.addEventListener("click",(function(){e.parentNode.classList.remove("loaded"),t.value="",/safari/i.test(navigator.userAgent)||(t.type="",t.type="file")}))}window.makeFileLoad=t,e[0]&&e.forEach((function(e){t(e)}))}(),function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"));var t,n;window.addEventListener("resize",(t=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},function(e){n&&clearTimeout(n),n=setTimeout(t,100,e)}));var i=document.querySelector("body");function o(e,t){this.trigger=e,this.modal=t,this.overlay=this.modal.querySelector(".modal__overlay"),this.closeBtn=this.modal.querySelector(".modal__close"),this.onOverlayClick=this.onOverlayClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.addEventListeners()}o.prototype.open=function(){this.modal.classList.add("js-show"),i.classList.add("js__body-no-scroll")},o.prototype.close=function(){this.modal.classList.remove("js-show"),i.classList.remove("js__body-no-scroll")},o.prototype.onOverlayClick=function(e){e.target===this.overlay&&this.close()},o.prototype.onCloseClick=function(){this.close()},o.prototype.onTriggerClick=function(){this.open()},o.prototype.addEventListeners=function(){this.overlay.addEventListener("click",this.onOverlayClick),this.closeBtn.addEventListener("click",this.onCloseClick),this.trigger.addEventListener("click",this.onTriggerClick)},window.Modal=o}(),function(){var e=document.querySelectorAll(".input-phone");if(e[0]){var t=new Inputmask("+7(999) 999-99-99");e.forEach((function(e){t.mask(e)}))}}(),function(){var e=document.querySelectorAll(".search"),t=document.querySelectorAll(".search + .search-close");e.forEach((function(e){e.addEventListener("focus",(function(){e.parentNode.parentNode.classList.add("js-focus")}))})),e.forEach((function(e){e.addEventListener("blur",(function(){""===e.value.split(" ").join("")&&(e.value=""),""===e.value||e.classList.contains("js-inputed")||e.classList.add("js-inputed"),""===e.value&&e.classList.contains("js-inputed")&&e.classList.remove("js-inputed")}))})),t.forEach((function(e){e.addEventListener("click",(function(){var t=e.previousElementSibling;t.value="",t.classList.contains("js-inputed")&&t.classList.remove("js-inputed")}))}))}(),function(){var e=document.querySelector(".cloud-status__installation-form");if(e){var t=e.querySelector(".cloud-status__installation-company input"),n=(e.querySelectorAll(".cloud-status__installation-file"),e.querySelector(".input-file__input")),i=e.querySelector(".file-load__clear"),o=e.querySelector(".cloud-status__installation-form-send"),s=function(){return""!==n.value&&""!==t.value},l=function(){s()&&o.hasAttribute("disabled")&&o.removeAttribute("disabled"),s()||!o.hasAttribute("disabled")&&o.setAttribute("disabled","")};window.onInstallationFileDrop=function(){l()},n.addEventListener("change",window.onInstallationFileDrop),i.addEventListener("click",(function(){o.hasAttribute("disabled")||o.setAttribute("disabled","")})),t.addEventListener("input",l)}}(),function(){var e=document.querySelector(".contract-modal-trigger"),t=document.querySelector(".contract-modal");if(console.log(e+"   "+t),e&&t){new Modal(e,t);$(".contract-modal__toggle-btn").on("click",(function(){$(this).next().slideToggle(),$(this).children(".info-block__toggle-icon").toggleClass("opened")}))}}(),$(window).load((function(){new Swiper(".menu-pa__container",{freeMode:!0,slidesPerView:"auto",breakpoints:{1280:{freeMode:!0,slidesPerView:"auto",allowTouchMove:!1}}})})),$(".first-payment__devices-btn").on("click",(function(){$(this).next().slideToggle(),$(this).children(".first-payment__device-toggle-icon").toggleClass("opened")}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJpbnB1dC1maWxlLmpzIiwibW9kYWwuanMiLCJwaG9uZS1tYXNrLmpzIiwic2VhcmNoLmpzIiwiY2xvdWQtaW5zdGFsbGF0aW9uLmpzIiwiY29udHJhY3QtbW9kYWwuanMiLCJtZW51LXBhLmpzIiwicGF5bWVudHMtZGV2aWNlcy5qcyJdLCJuYW1lcyI6WyJmaWxlRHJvcEFyZWEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtYWtlRmlsZUxvYWQiLCJmaWxlSW5wdXQiLCJxdWVyeVNlbGVjdG9yIiwiZmlsZUNsZWFyIiwicGFyZW50Tm9kZSIsInByZXZlbnREZWZhdWx0cyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImhpZ2hsaWdodCIsImNsYXNzTGlzdCIsImFkZCIsInVuaGlnaGxpZ2h0IiwicmVtb3ZlIiwiZm9yRWFjaCIsImV2ZW50TmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJmaWxlcyIsImRhdGFUcmFuc2ZlciIsInZhbHVlIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInR5cGUiLCJvbkZpbGVDaGFuZ2UiLCJyZWFkVXJsIiwiaW5wdXQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidGV4dENvbnRlbnQiLCJuYW1lIiwid2luZG93Iiwib25JbnN0YWxsYXRpb25GaWxlRHJvcCIsInJlYWRBc0RhdGFVUkwiLCJpdGVtIiwidmgiLCJpbm5lckhlaWdodCIsImRvY3VtZW50RWxlbWVudCIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJjb25jYXQiLCJmdW5jIiwidGltZXIiLCJldmVudCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCIkYm9keSIsIk1vZGFsIiwidHJpZ2dlciIsIm1vZGFsIiwidGhpcyIsIm92ZXJsYXkiLCJjbG9zZUJ0biIsIm9uT3ZlcmxheUNsaWNrIiwiYmluZCIsIm9uQ2xvc2VDbGljayIsIm9uVHJpZ2dlckNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJwcm90b3R5cGUiLCJvcGVuIiwiY2xvc2UiLCJ0YXJnZXQiLCJpbnB1dHMiLCJpbSIsIklucHV0bWFzayIsIm1hc2siLCJpdGVtcyIsInNwbGl0Iiwiam9pbiIsImNvbnRhaW5zIiwic2VhcmNoIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImZvcm0iLCJjb21wYW55Iiwic2VuZEJ0biIsImlzRm9ybUZpbGxlZCIsImNoZWNrSW5wdXRzIiwiaGFzQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiY29udHJhY3RCdG4iLCJtb2RhbENvbnRyYWN0IiwiY29uc29sZSIsImxvZyIsIiQiLCJvbiIsIm5leHQiLCJzbGlkZVRvZ2dsZSIsImNoaWxkcmVuIiwidG9nZ2xlQ2xhc3MiLCJsb2FkIiwiU3dpcGVyIiwiZnJlZU1vZGUiLCJzbGlkZXNQZXJWaWV3IiwiYnJlYWtwb2ludHMiLCIxMjgwIiwiYWxsb3dUb3VjaE1vdmUiXSwibWFwcGluZ3MiOiJBQUFBLGNDQUEsV0FDQSxJQUFBQSxFQUFBQyxTQUFBQyxpQkFBQSxzQkFFQSxTQUFBQyxFQUFBSCxHQUNBLElBQUFJLEVBQUFKLEVBQUFLLGNBQUEsU0FDQUMsRUFBQU4sRUFBQU8sV0FBQUYsY0FBQSxxQkFPQSxTQUFBRyxFQUFBQyxHQUNBQSxFQUFBQyxpQkFDQUQsRUFBQUUsa0JBYUEsU0FBQUMsRUFBQUgsR0FDQVQsRUFBQWEsVUFBQUMsSUFBQSxhQUdBLFNBQUFDLEVBQUFOLEdBQ0FULEVBQUFhLFVBQUFHLE9BQUEsYUF4QkEsQ0FBQSxZQUFBLFdBQUEsWUFBQSxRQUFBQyxTQUFBLFNBQUFDLEdBQ0FsQixFQUFBbUIsaUJBQUFELEVBQUFWLEdBQUEsTUFVQSxDQUFBLFlBQUEsWUFBQVMsU0FBQSxTQUFBQyxHQUNBbEIsRUFBQW1CLGlCQUFBRCxFQUFBTixHQUFBLE1BR0EsQ0FBQSxZQUFBLFFBQUFLLFNBQUEsU0FBQUMsR0FDQWxCLEVBQUFtQixpQkFBQUQsRUFB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LGFBQUEsYUFDQUgsRUFBQUksZ0JBQUEsWUFHQUgsTUFDQUQsRUFBQUcsYUFBQSxhQUNBSCxFQUFBSyxhQUFBLFdBQUEsS0FVQWhELE9BQUFDLHVCQUFBLFdBQ0E0QyxLQUdBN0UsRUFBQWUsaUJBQUEsU0FBQWlCLE9BQUFDLHdCQUNBL0IsRUFBQWEsaUJBQUEsU0FYQSxXQUNBNEQsRUFBQUcsYUFBQSxhQUNBSCxFQUFBSyxhQUFBLFdBQUEsT0FVQU4sRUFBQTNELGlCQUFBLFFBQUE4RCxJQW5EQSxHQ0FBLFdBQ0EsSUFBQUksRUFBQXBGLFNBQUFJLGNBQUEsMkJBQ0FpRixFQUFBckYsU0FBQUksY0FBQSxtQkFJQSxHQUZBa0YsUUFBQUMsSUFBQUgsRUFBQSxNQUFBQyxHQUVBRCxHQUFBQyxFQUFBLENBSUEsSUFBQWxDLE1BQUFpQyxFQUFBQyxHQUVBRyxFQUFBLCtCQUFBQyxHQUFBLFNBQUEsV0FDQUQsRUFBQWxDLE1BQUFvQyxPQUFBQyxjQUNBSCxFQUFBbEMsTUFBQXNDLFNBQUEsNEJBQUFDLFlBQUEsY0FkQSxHQ0NBTCxFQUFBckQsUUFBQTJELE1BQUEsV0FDQSxJQUFBQyxPQUFBLHNCQUFBLENBQ0FDLFVBQUEsRUFDQUMsY0FBQSxPQUNBQyxZQUFBLENBRUFDLEtBQUEsQ0FDQUgsVUFBQSxFQUNBQyxjQUFBLE9BQ0FHLGdCQUFBLFNDVEFaLEVBQUEsK0JBQUFDLEdBQUEsU0FBQSxXQUNBRCxFQUFBbEMsTUFBQW9DLE9BQUFDLGNBQ0FILEVBQUFsQyxNQUNBc0MsU0FBQSxzQ0FDQUMsWUFBQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgZmlsZURyb3BBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LWZpbGVfX2xhYmVsJyk7XG5cbiAgZnVuY3Rpb24gbWFrZUZpbGVMb2FkKGZpbGVEcm9wQXJlYSkge1xuICAgIHZhciBmaWxlSW5wdXQgPSBmaWxlRHJvcEFyZWEucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcbiAgICB2YXIgZmlsZUNsZWFyID0gZmlsZURyb3BBcmVhLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmZpbGUtbG9hZF9fY2xlYXInKTsgLy8g0KHQsdGA0LDRgdGL0LLQsNC10Lwg0YHRgtCw0L3QtNCw0YDRgtC90YvQtSDRgdC+0LHRi9GC0LjRjyDQv9GA0Lgg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQuCDRhNCw0LnQu9CwXG5cbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgZmlsZURyb3BBcmVhLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBwcmV2ZW50RGVmYXVsdHMsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0cyhlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIDsgLy8g0JTQvtCx0LDQstC70Y/QtdC8INGB0YLQuNC70Lgg0L/RgNC4INC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40Lgg0YTQsNC50LvQsCDQvdCw0LQg0L3Rg9C20L3QvtC5INC+0LHQu9Cw0YHRgtGM0Y5cblxuICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICBmaWxlRHJvcEFyZWEuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhpZ2hsaWdodCwgZmFsc2UpO1xuICAgIH0pO1xuICAgIFsnZHJhZ2xlYXZlJywgJ2Ryb3AnXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgIGZpbGVEcm9wQXJlYS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdW5oaWdobGlnaHQsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodChlKSB7XG4gICAgICBmaWxlRHJvcEFyZWEuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7XG4gICAgfVxuXG4gICAgO1xuXG4gICAgZnVuY3Rpb24gdW5oaWdobGlnaHQoZSkge1xuICAgICAgZmlsZURyb3BBcmVhLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICAgIH1cblxuICAgIDsgLy9cblxuICAgIGZpbGVEcm9wQXJlYS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCwgZmFsc2UpO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgICB2YXIgZHQgPSBlLmRhdGFUcmFuc2ZlcjtcbiAgICAgIHZhciBmaWxlcyA9IGR0LmZpbGVzO1xuXG4gICAgICBpZiAoZmlsZUlucHV0LmZpbGVzICYmIGZpbGVJbnB1dC5maWxlc1swXSkge1xuICAgICAgICBmaWxlSW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICBpZiAoIS9zYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgZmlsZUlucHV0LnR5cGUgPSAnJztcbiAgICAgICAgICBmaWxlSW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmaWxlSW5wdXQuZmlsZXMgPSBmaWxlcztcbiAgICAgIG9uRmlsZUNoYW5nZSgpO1xuICAgIH1cblxuICAgIDtcblxuICAgIHZhciBvbkZpbGVDaGFuZ2UgPSBmdW5jdGlvbiBvbkZpbGVDaGFuZ2UoKSB7XG4gICAgICByZWFkVXJsKGZpbGVJbnB1dCk7XG4gICAgfTtcblxuICAgIHZhciByZWFkVXJsID0gZnVuY3Rpb24gcmVhZFVybChpbnB1dCkge1xuICAgICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGZpbGVEcm9wQXJlYS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2xvYWRlZCcpO1xuICAgICAgICAgIGZpbGVEcm9wQXJlYS5uZXh0RWxlbWVudFNpYmxpbmcucXVlcnlTZWxlY3RvcignLmZpbGUtbG9hZF9fbmFtZScpLnRleHRDb250ZW50ID0gaW5wdXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgICB3aW5kb3cub25JbnN0YWxsYXRpb25GaWxlRHJvcCAmJiB3aW5kb3cub25JbnN0YWxsYXRpb25GaWxlRHJvcCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gb25DbGVhcigpIHtcbiAgICAgIGZpbGVEcm9wQXJlYS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRlZCcpO1xuICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgIGlmICghL3NhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgZmlsZUlucHV0LnR5cGUgPSAnJztcbiAgICAgICAgZmlsZUlucHV0LnR5cGUgPSAnZmlsZSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uRmlsZUNoYW5nZSk7XG4gICAgZmlsZUNsZWFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGVhcik7XG4gIH1cblxuICB3aW5kb3cubWFrZUZpbGVMb2FkID0gbWFrZUZpbGVMb2FkO1xuXG4gIGlmICghZmlsZURyb3BBcmVhWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZmlsZURyb3BBcmVhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBtYWtlRmlsZUxvYWQoaXRlbSk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZoJywgXCJcIi5jb25jYXQodmgsIFwicHhcIikpO1xuXG4gIHZhciBvblJlc2l6ZSA9IGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgIHZhciB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZoJywgXCJcIi5jb25jYXQodmgsIFwicHhcIikpO1xuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShvblJlc2l6ZSkpO1xuICB2YXIgJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbiAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYykge1xuICAgIHZhciB0aW1lcjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAodGltZXIpIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuYywgMTAwLCBldmVudCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIE1vZGFsKHRyaWdnZXIsIG1vZGFsKSB7XG4gICAgdGhpcy50cmlnZ2VyID0gdHJpZ2dlcjtcbiAgICB0aGlzLm1vZGFsID0gbW9kYWw7XG4gICAgdGhpcy5vdmVybGF5ID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX292ZXJsYXknKTtcbiAgICB0aGlzLmNsb3NlQnRuID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG4gICAgdGhpcy5vbk92ZXJsYXlDbGljayA9IHRoaXMub25PdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvc2VDbGljayA9IHRoaXMub25DbG9zZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyaWdnZXJDbGljayA9IHRoaXMub25UcmlnZ2VyQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ2pzLXNob3cnKTtcbiAgICAkYm9keS5jbGFzc0xpc3QuYWRkKCdqc19fYm9keS1uby1zY3JvbGwnKTtcbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uT3ZlcmxheUNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUub25DbG9zZUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUub25UcmlnZ2VyQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5vcGVuKCk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25PdmVybGF5Q2xpY2spO1xuICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xvc2VDbGljayk7XG4gICAgdGhpcy50cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblRyaWdnZXJDbGljayk7XG4gIH07XG5cbiAgd2luZG93Lk1vZGFsID0gTW9kYWw7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG5cbiAgaWYgKCFpbnB1dHNbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG4gIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaW0ubWFzayhpdGVtKTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoJyk7XG4gIHZhciBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2ggKyAuc2VhcmNoLWNsb3NlJyk7XG4gIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgaXRlbS5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnanMtZm9jdXMnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXRlbS52YWx1ZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJykge1xuICAgICAgICBpdGVtLnZhbHVlID0gJyc7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLnZhbHVlICE9PSAnJyAmJiAhaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLWlucHV0ZWQnKSkge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2pzLWlucHV0ZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGl0ZW0udmFsdWUgPT09ICcnICYmIGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1pbnB1dGVkJykpIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdqcy1pbnB1dGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBjbG9zZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzZWFyY2ggPSBpdGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICBzZWFyY2gudmFsdWUgPSAnJztcblxuICAgICAgaWYgKHNlYXJjaC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLWlucHV0ZWQnKSkge1xuICAgICAgICBzZWFyY2guY2xhc3NMaXN0LnJlbW92ZSgnanMtaW5wdXRlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3VkLXN0YXR1c19faW5zdGFsbGF0aW9uLWZvcm0nKTtcblxuICBpZiAoIWZvcm0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY29tcGFueSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNsb3VkLXN0YXR1c19faW5zdGFsbGF0aW9uLWNvbXBhbnkgaW5wdXQnKTtcbiAgdmFyIGZpbGVJbnB1dEJsb2NrID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuY2xvdWQtc3RhdHVzX19pbnN0YWxsYXRpb24tZmlsZScpO1xuICB2YXIgZmlsZUlucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtZmlsZV9faW5wdXQnKTtcbiAgdmFyIGZpbGVDbGVhciA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZpbGUtbG9hZF9fY2xlYXInKTtcbiAgdmFyIHNlbmRCdG4gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jbG91ZC1zdGF0dXNfX2luc3RhbGxhdGlvbi1mb3JtLXNlbmQnKTtcblxuICB2YXIgaXNGb3JtRmlsbGVkID0gZnVuY3Rpb24gaXNGb3JtRmlsbGVkKCkge1xuICAgIHZhciBmaWxsZWQgPSB0cnVlO1xuXG4gICAgaWYgKGZpbGVJbnB1dC52YWx1ZSA9PT0gJycgfHwgY29tcGFueS52YWx1ZSA9PT0gJycpIHtcbiAgICAgIGZpbGxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaWxsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmaWxsZWQ7XG4gIH07XG5cbiAgdmFyIGNoZWNrSW5wdXRzID0gZnVuY3Rpb24gY2hlY2tJbnB1dHMoKSB7XG4gICAgaWYgKGlzRm9ybUZpbGxlZCgpKSB7XG4gICAgICBzZW5kQnRuLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSAmJiBzZW5kQnRuLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzRm9ybUZpbGxlZCgpKSB7XG4gICAgICAhc2VuZEJ0bi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgJiYgc2VuZEJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgb25GaWxlQ2xlYXIgPSBmdW5jdGlvbiBvbkZpbGVDbGVhcigpIHtcbiAgICBpZiAoIXNlbmRCdG4uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICBzZW5kQnRuLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgfVxuICB9O1xuXG4gIHdpbmRvdy5vbkluc3RhbGxhdGlvbkZpbGVEcm9wID0gZnVuY3Rpb24gKCkge1xuICAgIGNoZWNrSW5wdXRzKCk7XG4gIH07XG5cbiAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHdpbmRvdy5vbkluc3RhbGxhdGlvbkZpbGVEcm9wKTtcbiAgZmlsZUNsZWFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25GaWxlQ2xlYXIpO1xuICBjb21wYW55LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2hlY2tJbnB1dHMpO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNvbnRyYWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyYWN0LW1vZGFsLXRyaWdnZXInKTtcbiAgdmFyIG1vZGFsQ29udHJhY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJhY3QtbW9kYWwnKTtcbiAgY29uc29sZS5sb2coY29udHJhY3RCdG4gKyAnICAgJyArIG1vZGFsQ29udHJhY3QpO1xuXG4gIGlmICghY29udHJhY3RCdG4gfHwgIW1vZGFsQ29udHJhY3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbW9kYWwgPSBuZXcgTW9kYWwoY29udHJhY3RCdG4sIG1vZGFsQ29udHJhY3QpO1xuICAkKCcuY29udHJhY3QtbW9kYWxfX3RvZ2dsZS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcbiAgICAkKHRoaXMpLmNoaWxkcmVuKCcuaW5mby1ibG9ja19fdG9nZ2xlLWljb24nKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcubWVudS1wYV9fY29udGFpbmVyJywge1xuICAgICAgZnJlZU1vZGU6IHRydWUsXG4gICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gICAgICBicmVha3BvaW50czoge1xuICAgICAgICAxMjgwOiB7XG4gICAgICAgICAgZnJlZU1vZGU6IHRydWUsXG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICAgICAgICAgIGFsbG93VG91Y2hNb3ZlOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLmZpcnN0LXBheW1lbnRfX2RldmljZXMtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykubmV4dCgpLnNsaWRlVG9nZ2xlKCk7XG4gICAgJCh0aGlzKS5jaGlsZHJlbignLmZpcnN0LXBheW1lbnRfX2RldmljZS10b2dnbGUtaWNvbicpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcbiAgfSk7XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgZmlsZURyb3BBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LWZpbGVfX2xhYmVsJyk7XG5cbiAgZnVuY3Rpb24gbWFrZUZpbGVMb2FkKGZpbGVEcm9wQXJlYSkge1xuICAgIGNvbnN0IGZpbGVJbnB1dCA9IGZpbGVEcm9wQXJlYS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgIGNvbnN0IGZpbGVDbGVhciA9IGZpbGVEcm9wQXJlYS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWxvYWRfX2NsZWFyJyk7XG4gICAgLy8g0KHQsdGA0LDRgdGL0LLQsNC10Lwg0YHRgtCw0L3QtNCw0YDRgtC90YvQtSDRgdC+0LHRi9GC0LjRjyDQv9GA0Lgg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQuCDRhNCw0LnQu9CwXG5cbiAgICBbJ2RyYWdlbnRlcicsICdkcmFnb3ZlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgIGZpbGVEcm9wQXJlYS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgcHJldmVudERlZmF1bHRzLCBmYWxzZSlcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0cyAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuXG4gICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INGB0YLQuNC70Lgg0L/RgNC4INC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40Lgg0YTQsNC50LvQsCDQvdCw0LQg0L3Rg9C20L3QvtC5INC+0LHQu9Cw0YHRgtGM0Y5cblxuICAgIFsnZHJhZ2VudGVyJywgJ2RyYWdvdmVyJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgZmlsZURyb3BBcmVhLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoaWdobGlnaHQsIGZhbHNlKVxuICAgIH0pO1xuXG4gICAgWydkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgIGZpbGVEcm9wQXJlYS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdW5oaWdobGlnaHQsIGZhbHNlKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBoaWdobGlnaHQoZSkge1xuICAgICAgZmlsZURyb3BBcmVhLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiB1bmhpZ2hsaWdodChlKSB7XG4gICAgICBmaWxlRHJvcEFyZWEuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgfTtcblxuICAgIC8vXG5cbiAgICBmaWxlRHJvcEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3AsIGZhbHNlKVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgICBsZXQgZHQgPSBlLmRhdGFUcmFuc2ZlclxuICAgICAgbGV0IGZpbGVzID0gZHQuZmlsZXNcblxuICAgICAgaWYgKGZpbGVJbnB1dC5maWxlcyAmJiBmaWxlSW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgICAgaWYoIS9zYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXtcbiAgICAgICAgICBmaWxlSW5wdXQudHlwZSA9ICcnO1xuICAgICAgICAgIGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpbGVJbnB1dC5maWxlcyA9IGZpbGVzO1xuICAgICAgb25GaWxlQ2hhbmdlKCk7XG5cbiAgICB9O1xuXG4gICAgY29uc3Qgb25GaWxlQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgcmVhZFVybChmaWxlSW5wdXQpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlYWRVcmwgPSAoaW5wdXQpID0+IHtcbiAgICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBmaWxlRHJvcEFyZWEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdsb2FkZWQnKTtcbiAgICAgICAgICBmaWxlRHJvcEFyZWFcbiAgICAgICAgICAgIC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZmlsZS1sb2FkX19uYW1lJylcbiAgICAgICAgICAgIC50ZXh0Q29udGVudCA9IGlucHV0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgICAgICB3aW5kb3cub25JbnN0YWxsYXRpb25GaWxlRHJvcCAmJiB3aW5kb3cub25JbnN0YWxsYXRpb25GaWxlRHJvcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQ2xlYXIoKSB7XG4gICAgICBmaWxlRHJvcEFyZWEucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkZWQnKTtcblxuICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgIGlmKCEvc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7XG4gICAgICAgIGZpbGVJbnB1dC50eXBlID0gJyc7XG4gICAgICAgIGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZpbGVDaGFuZ2UpO1xuICAgIGZpbGVDbGVhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xlYXIpO1xuICB9XG5cbiAgd2luZG93Lm1ha2VGaWxlTG9hZCA9IG1ha2VGaWxlTG9hZDtcblxuXG4gIGlmICghZmlsZURyb3BBcmVhWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZmlsZURyb3BBcmVhLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgIG1ha2VGaWxlTG9hZChpdGVtKTtcbiAgfSk7XG59KSgpO1xuIiwiKCgpID0+IHtcbiAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZoJywgYCR7dmh9cHhgKTtcblxuICBjb25zdCBvblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG4gIH07XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKG9uUmVzaXplKSk7XG5cbiAgY29uc3QgJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbiAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYyl7XG4gICAgdmFyIHRpbWVyO1xuICAgIHJldHVybiBmdW5jdGlvbihldmVudCl7XG4gICAgICBpZih0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jLDEwMCxldmVudCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIE1vZGFsICh0cmlnZ2VyLCBtb2RhbCkge1xuICAgIHRoaXMudHJpZ2dlciA9IHRyaWdnZXI7XG4gICAgdGhpcy5tb2RhbCA9IG1vZGFsO1xuICAgIHRoaXMub3ZlcmxheSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19vdmVybGF5Jyk7XG4gICAgdGhpcy5jbG9zZUJ0biA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpO1xuXG4gICAgdGhpcy5vbk92ZXJsYXlDbGljayA9IHRoaXMub25PdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvc2VDbGljayA9IHRoaXMub25DbG9zZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyaWdnZXJDbGljayA9IHRoaXMub25UcmlnZ2VyQ2xpY2suYmluZCh0aGlzKTtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LmFkZCgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLXNob3cnKTtcbiAgICAkYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdqc19fYm9keS1uby1zY3JvbGwnKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vbk92ZXJsYXlDbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vbkNsb3NlQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub25UcmlnZ2VyQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm9wZW4oKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25PdmVybGF5Q2xpY2spO1xuICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xvc2VDbGljayk7XG4gICAgdGhpcy50cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblRyaWdnZXJDbGljayk7XG4gIH1cblxuICB3aW5kb3cuTW9kYWwgPSBNb2RhbDtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dC1waG9uZScpO1xuXG4gIGlmICghaW5wdXRzWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG5cbiAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgIGltLm1hc2soaXRlbSk7XG4gIH0pXG59KSgpO1xuIiwiKCgpID0+IHtcbiAgY29uc3QgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoJyk7XG4gIGNvbnN0IGNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlYXJjaCArIC5zZWFyY2gtY2xvc2UnKTtcblxuICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+e1xuICAgICAgaXRlbS5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnanMtZm9jdXMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgaXRlbS52YWx1ZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJ1xuICAgICAgKSB7XG4gICAgICAgIGl0ZW0udmFsdWUgPSAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBpdGVtLnZhbHVlICE9PSAnJ1xuICAgICAgICAmJiAhaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLWlucHV0ZWQnKVxuICAgICAgKSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnanMtaW5wdXRlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGl0ZW0udmFsdWUgPT09ICcnXG4gICAgICAgICYmIGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1pbnB1dGVkJylcbiAgICAgICkge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLWlucHV0ZWQnKTtcbiAgICAgIH1cbiAgICB9KVxuICB9KTtcblxuICBjbG9zZS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlYXJjaCA9IGl0ZW0ucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgIHNlYXJjaC52YWx1ZSA9ICcnO1xuICAgICAgaWYgKFxuICAgICAgICBzZWFyY2guY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1pbnB1dGVkJylcbiAgICAgICkge1xuICAgICAgICBzZWFyY2guY2xhc3NMaXN0LnJlbW92ZSgnanMtaW5wdXRlZCcpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG91ZC1zdGF0dXNfX2luc3RhbGxhdGlvbi1mb3JtJyk7XG5cbiAgaWYgKCFmb3JtKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY29tcGFueSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNsb3VkLXN0YXR1c19faW5zdGFsbGF0aW9uLWNvbXBhbnkgaW5wdXQnKTtcblxuICBjb25zdCBmaWxlSW5wdXRCbG9jayA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmNsb3VkLXN0YXR1c19faW5zdGFsbGF0aW9uLWZpbGUnKTtcbiAgY29uc3QgZmlsZUlucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtZmlsZV9faW5wdXQnKTtcbiAgY29uc3QgZmlsZUNsZWFyID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuZmlsZS1sb2FkX19jbGVhcicpO1xuXG4gIGNvbnN0IHNlbmRCdG4gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jbG91ZC1zdGF0dXNfX2luc3RhbGxhdGlvbi1mb3JtLXNlbmQnKTtcblxuICBjb25zdCBpc0Zvcm1GaWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBsZXQgZmlsbGVkID0gdHJ1ZTtcblxuICAgIGlmIChmaWxlSW5wdXQudmFsdWUgPT09ICcnIHx8IGNvbXBhbnkudmFsdWUgPT09ICcnKSB7XG4gICAgICBmaWxsZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsbGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsbGVkO1xuICB9XG5cbiAgY29uc3QgY2hlY2tJbnB1dHMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoaXNGb3JtRmlsbGVkKCkpIHtcbiAgICAgIHNlbmRCdG4uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgICAmJiBzZW5kQnRuLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzRm9ybUZpbGxlZCgpKSB7XG4gICAgICAhc2VuZEJ0bi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcbiAgICAgICYmIHNlbmRCdG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBvbkZpbGVDbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghc2VuZEJ0bi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgIHNlbmRCdG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cub25JbnN0YWxsYXRpb25GaWxlRHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgIGNoZWNrSW5wdXRzKCk7XG4gIH07XG5cbiAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHdpbmRvdy5vbkluc3RhbGxhdGlvbkZpbGVEcm9wKTtcbiAgZmlsZUNsZWFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25GaWxlQ2xlYXIpO1xuICBjb21wYW55LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2hlY2tJbnB1dHMpO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgY29udHJhY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJhY3QtbW9kYWwtdHJpZ2dlcicpO1xuICBjb25zdCBtb2RhbENvbnRyYWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyYWN0LW1vZGFsJyk7XG5cbiAgY29uc29sZS5sb2coY29udHJhY3RCdG4gKyAnICAgJyArIG1vZGFsQ29udHJhY3QpO1xuXG4gIGlmICghY29udHJhY3RCdG4gfHwgIW1vZGFsQ29udHJhY3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChjb250cmFjdEJ0biwgbW9kYWxDb250cmFjdCk7XG5cbiAgJCgnLmNvbnRyYWN0LW1vZGFsX190b2dnbGUtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcbiAgICAkKHRoaXMpLmNoaWxkcmVuKCcuaW5mby1ibG9ja19fdG9nZ2xlLWljb24nKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XG4gIH0pXG59KSgpO1xuIiwiKCgpID0+IHtcbiAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoJy5tZW51LXBhX19jb250YWluZXInLCB7XG4gICAgICBmcmVlTW9kZTogdHJ1ZSxcbiAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcbiAgICAgIGJyZWFrcG9pbnRzOiB7XG5cbiAgICAgICAgMTI4MDoge1xuICAgICAgICAgIGZyZWVNb2RlOiB0cnVlLFxuICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcbiAgICAgICAgICBhbGxvd1RvdWNoTW92ZTogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICQoJy5maXJzdC1wYXltZW50X19kZXZpY2VzLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykubmV4dCgpLnNsaWRlVG9nZ2xlKCk7XG4gICAgJCh0aGlzKVxuICAgICAgLmNoaWxkcmVuKCcuZmlyc3QtcGF5bWVudF9fZGV2aWNlLXRvZ2dsZS1pY29uJylcbiAgICAgIC50b2dnbGVDbGFzcygnb3BlbmVkJyk7XG4gIH0pO1xufSkoKTtcbiJdfQ==
